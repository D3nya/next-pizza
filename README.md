# üçï Next Pizza

Next Pizza ‚Äî —ç—Ç–æ —É—á–µ–±–Ω—ã–π e-commerce –ø—Ä–æ–µ–∫—Ç-–¥–µ–º–æ, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ **Next.js 13 (App Router)** –∏ TypeScript. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –∫–æ—Ä–∑–∏–Ω–æ–π, –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞, –æ–ø–ª–∞—Ç–æ–π –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.

## –°—Ç–µ–∫

- **Next.js 13** ‚Äî SSR/SSG, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è App Router, —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —ç–∫—à–µ–Ω—ã
- **React 18**, **TypeScript**
- **Tailwind CSS** + shadcn/ui
- **Prisma ORM** + PostgreSQL
- **NextAuth.js** ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (email link)
- **Zustand** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–æ—Ä–∑–∏–Ω–∞)
- ESLint, Prettier, Husky, Commitlint (Conventional Commits)
- Docker / Docker Compose (dev + prod)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
$ git clone https://github.com/username/next-pizza.git
$ cd next-pizza

# 2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
$ npm ci                     # –∏–ª–∏ pnpm install / yarn install

# 3. –°–æ–∑–¥–∞—ë–º —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
$ cp .env.example .env        # –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

# 4. –ü–æ–¥–Ω–∏–º–∞–µ–º –ë–î (PostgreSQL 17 –≤ Docker)
$ docker compose up -d postgres

# 5. –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
$ npx prisma migrate dev      # –º–∏–≥—Ä–∞—Ü–∏–∏
$ npx prisma db seed          # —Å–∏–¥—ã (–ø—Ä–∏–º–µ—Ä –º–µ–Ω—é, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ —Ç.–ø.)

# 6. –ó–∞–ø—É—Å–∫–∞–µ–º dev-—Å–µ—Ä–≤–µ—Ä
$ npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: <http://localhost:3000>

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# PostgreSQL
POSTGRES_USER=pizza
POSTGRES_PASSWORD=secret
POSTGRES_DB=pizza_db
DATABASE_URL="postgresql://pizza:secret@localhost:5432/pizza_db"

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET="–°–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞"

# SMTP –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Å—ã–ª–æ–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (–ø—Ä–∏–º–µ—Ä –¥–ª—è Yandex)
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=465
SMTP_USER=username@yandex.ru
SMTP_PASSWORD=app_password

# URL, –∫—É–¥–∞ –ø–ª–∞—Ç—ë–∂–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —à–ª—ë—Ç callback
PAYMENT_CALLBACK_URL=http://localhost:3000/api/checkout/callback
```

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ `.env.example` (–µ—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏).

## –°–∫—Ä–∏–ø—Ç—ã npm

| –°–∫—Ä–∏–ø—Ç           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                             |
| ---------------- | -------------------------------------- |
| `dev`            | –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ dev-—Å–µ—Ä–≤–µ—Ä–∞          |
| `build`          | –ü—Ä–æ–¥-—Å–±–æ—Ä–∫–∞ Next.js                    |
| `start`          | –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è           |
| `lint`           | –ü—Ä–æ–≤–µ—Ä–∫–∞ ESLint                        |
| `format`         | –ü—Ä–∏–º–µ–Ω–∏—Ç—å Prettier –∫ —Ñ–∞–π–ª–∞–º            |
| `prisma:migrate` | `prisma migrate deploy` –¥–ª—è production |
| `prisma:studio`  | –û—Ç–∫—Ä—ã—Ç—å Prisma Studio                  |

## Docker

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π **Dockerfile** –∏ **docker-compose.yaml**.

### –ü—Ä–æ–¥–∞–∫—à–Ω-—Å–±–æ—Ä–∫–∞

```bash
# —Å–æ–±–∏—Ä–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–¥–∞–∫—à–Ω-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
$ docker compose --profile prod up -d --build
```

–ë—É–¥—É—Ç –ø–æ–¥–Ω—è—Ç—ã:

1. `postgres` ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ë–î
2. `nextjs` ‚Äî –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π standalone-build –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ Prisma

- –°—Ö–µ–º–∞ –æ–ø–∏—Å–∞–Ω–∞ –≤ `prisma/schema.prisma`.
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –∑–∞–ø—É—Å–∫–∞–π—Ç–µ:
  ```bash
  npx prisma migrate dev --name <migration_name>
  ```
- –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ / –ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —É–¥–æ–±–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è `npx prisma studio`.

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–°–∏–¥ —Å–∫—Ä–∏–ø—Ç (`prisma/seed.ts`) –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ë–î –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏, –ø–∏—Ü—Ü–∞–º–∏ –∏ —Ç–µ—Å—Ç–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ dev-—Ä–µ–∂–∏–º–µ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é –∫–æ–º–∞–Ω–¥–æ–π `npm run seed` (—Å–º. —Å–∫—Ä–∏–ø—Ç –≤ `package.json`).

## –õ–∏–Ω—Ç–∏–Ω–≥ –∏ git-—Ö—É–∫–∏

Husky –ø–æ–¥–∫–ª—é—á–∞–µ—Ç pre-commit –∏ commit-msg —Ö—É–∫–∏:

- `pre-commit` ‚Üí `npm run lint` –∏ `npm run format:check`
- `commit-msg` ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Commitlint

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
app/                # –º–∞—Ä—à—Ä—É—Ç—ã Next.js (App Router)
components/         # –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ UI/–±–ª–æ–∫–∏
services/           # –∫–ª–∏–µ–Ω—Ç—ã API, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
store/              # Zustand-—Å—Ç–æ—Ä—ã
prisma/             # —Å—Ö–µ–º–∞, –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–∏–¥—ã
public/             # —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, svg)
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.
